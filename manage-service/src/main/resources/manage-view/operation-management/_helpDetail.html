<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" class="main-html">
<!--/*@thymesVar id="currentData" type="cn.lmjia.market.core.entity.help.CommonProblem"*/-->
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="format-detection" content="telephone=no"/>
    <title>新增词条</title>
    <!--TODO 一页两用-->
    <!--<title>编辑词条</title>-->
    <!--第三方库-->
    <link rel="stylesheet" href="//cdn.lmjia.cn/bootstrap-3.3.7/css/bootstrap.css">
    <link rel="stylesheet" href="//cdn.lmjia.cn/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdn.lmjia.cn/city-picker/1.1.0/css/city-picker.css">
    <link rel="stylesheet" href="//cdn.lmjia.cn/hplus/plugins/iCheck/1.0.2/custom.css">
    <link rel="stylesheet" href="//cdn.lmjia.cn//chosen/1.7.0/chosen.min.css">
    <!--重置库-->
    <link rel="stylesheet" href="../manage-resource/css/style.min.css">
    <link rel="stylesheet" href="../manage-resource/css/custom.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="//cdn.lmjia.cn/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.lmjia.cn/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content">
    <div class="ibox">
        <div class="ibox-content">
            <ol class="breadcrumb">
                <li><a href="_helpCenter.html" th:href="@{/manageCommonProblem}">帮助中心</a></li>
                <li><strong>新增词条</strong></li>
            </ol>
        </div>
        <form id="J_helpForm" method="post" action="_helpCenter.html" th:action="@{/manageCommonProblemSubmit}">
            <input type="hidden" name="id" th:value="${currentData!=null?currentData.id:null}">
            <div class="row">
                <div class="col-sm-12">
                    <div class="ibox">
                        <div class="ibox-title">
                            详细信息
                        </div>
                        <div class="ibox-content">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-sm-8">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">词条标题 <span
                                                        class="asterisk">*</span></label>
                                                <div class="col-sm-6">
                                                    <input type="text" placeholder="请输入词条标题"
                                                           th:value="${currentData!=null?currentData.title:null}"
                                                           class="form-control"
                                                           name="title" required>
                                                </div>
                                            </div>
                                            <!--TODO 目前可以没有-->
                                            <!--<div class="form-group">
                                                <label class="col-sm-3 control-label">词条类型 <span
                                                        class="asterisk">*</span>
                                                </label>
                                                <div class="col-sm-6">
                                                    <select class="form-control" name="entryType">
                                                        <option value="1">账户问题</option>
                                                        <option value="2">提现问题</option>
                                                        <option value="3">其他问题</option>
                                                    </select>
                                                </div>
                                            </div>-->
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label">词条详情 <span
                                                        class="asterisk">*</span></label>
                                                <div class="col-sm-9">
                                                <textarea class="form-control editor" rows="3" name="content"
                                                          title="详情" th:value="${currentData!=null?currentData.content:null}" required></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-6 col-sm-offset-3 control-label">
                                                    <button th:if="${currentData==null}" type="submit"
                                                            class="btn btn-primary btn-block btn-lg">
                                                        新&nbsp;增
                                                    </button>
                                                    <button th:if="${currentData!=null}" type="submit"
                                                            class="btn btn-primary btn-block btn-lg">
                                                        修&nbsp;改
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
</body>
<script src="//cdn.lmjia.cn/jquery/1.12.4/jquery.js"></script>
<script src="//cdn.lmjia.cn/bootstrap-3.3.7/js/bootstrap.min.js"></script>
<script src="//cdn.lmjia.cn/layer/3.0.3/layer.js"></script>
<script src="//cdn.lmjia.cn/jquery-validation/1.16.0/jquery.validate.min.js"></script>
<script src="//cdn.lmjia.cn/jquery-validation/1.16.0/localization/messages_zh.min.js"></script>
<script src="//cdn.lmjia.cn/tinymce_4.7.1/js/tinymce/tinymce.min.js"></script>
<script src="//cdn.lmjia.cn/tinymce_4.7.1/js/tinymce/jquery.tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: 'textarea.editor',
        language: 'zh_CN',
        height: 500,
        plugins: [
            "advlist autolink lists link image charmap print preview anchor",
            "searchreplace visualblocks code fullscreen",
            "insertdatetime media table contextmenu paste imagetools image code"
        ],
        toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image code",
        imagetools_cors_hosts: ['test.lmjia.cn', 'app.lmjia.cn', 'localhost'],
        // without images_upload_url set, Upload tab won't show up
        images_upload_url: 'resourceUpload/tinyImage'
        // we override default upload handler to simulate successful upload
//        images_upload_handler: function (blobInfo, success, failure) {
//            setTimeout(function () {
//                // no matter what you upload, we will turn it into TinyMCE logo :)
//                success('http://moxiecode.cachefly.net/tinymce/v9/images/logo.png');
//            }, 2000);
//        },
//
//        init_instance_callback: function (ed) {
//            ed.execCommand('mceImage');
//        }
//        content_css: [
//            '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
//            '//www.tinymce.com/css/codepen.min.css'
//        ]

    });


    $('#J_helpForm').validate({
        errorElement: "span",
        errorPlacement: function (error, element) {
            error.addClass("help-block");
            if (element.prop("type") === "checkbox") {
                element.siblings('label').addClass('error');
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function (element, errorClass, validClass) {
            $(element).parent().addClass("has-error").removeClass("has-success");
        },
        unhighlight: function (element, errorClass, validClass) {
            if ($(element).prop("type") === "checkbox") {
                $(element).siblings('label').removeClass('error');
            } else {
                $(element).parent().addClass("has-success").removeClass("has-error");
            }
        },
        submitHandler: function (form) {
            if (!tinymce.activeEditor.getContent()) {
                layer.msg('词条详情不能为空');
            } else {
                form.submit();
            }
        }
    })
</script>
</html>